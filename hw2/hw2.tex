\documentclass{article}

\usepackage{fancyhdr}
\usepackage{extramarks}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{tikz}
\usepackage{enumerate}
\usepackage{xspace}

\usetikzlibrary{automata, positioning}

\topmargin=-0.45in
\evensidemargin=0in
\oddsidemargin=0in
\textwidth=6.5in
\textheight=9.0in
\headsep=0.25in

\linespread{1.1}

\pagestyle{fancy}
\lhead{\hmwkAuthorName\ -\ \hmwkAuthorID}
\chead{\hmwkClass: Homework \hmwkNo}
\rhead{\firstxmark}
\lfoot{\lastxmark}
\cfoot{\thepage}

\renewcommand\headrulewidth{0.4pt}
\renewcommand\footrulewidth{0.4pt}

\newcommand{\enterProblemHeader}[1]{
    \nobreak\extramarks{}{Problem \arabic{#1} continued on next page\ldots}\nobreak{}
    \nobreak\extramarks{Problem \arabic{#1} (continued)}{Problem \arabic{#1} continued on next page\ldots}\nobreak{}
}

\newcommand{\exitProblemHeader}[1]{
    \nobreak\extramarks{Problem \arabic{#1} (continued)}{Problem \arabic{#1} continued on next page\ldots}\nobreak{}
    \stepcounter{#1}
    \nobreak\extramarks{Problem \arabic{#1}}{}\nobreak{}
}

\setcounter{secnumdepth}{0}
\newcounter{homeworkProblemCounter}
\setcounter{homeworkProblemCounter}{1}
\nobreak\extramarks{Problem \arabic{homeworkProblemCounter}}{}\nobreak{}

\newenvironment{homeworkProblem}[1][-1]{
    \ifnum#1>0
        \setcounter{homeworkProblemCounter}{#1}
    \fi
    \section{Problem \arabic{homeworkProblemCounter}}
    \enterProblemHeader{homeworkProblemCounter}
}{
    \exitProblemHeader{homeworkProblemCounter}
}

\newenvironment{solution}{
    \subsection{Solution}
}

\newcommand{\hmwkNo}{2}
\newcommand{\hmwkDueDate}{Wednesday, April 24, 2019 at 11:59pm}
\newcommand{\hmwkClass}{CS244 Theory of Computation}
\newcommand{\hmwkClassInstructor}{Fu Song}
\newcommand{\hmwkAuthorName}{Yuyang Rong}
\newcommand{\hmwkAuthorID}{69850764}

\newcommand{\CFG}{\mathsf{CFG}}
\newcommand{\TM}{\mathsf{TM}}
\newcommand{\accept}{\textcolor{blue}{accept}\xspace}
\newcommand{\reject}{\textcolor{red}{reject}\xspace}
\title{
    \vspace{-0.4in}
    \textmd{\textbf{\hmwkClass \\ Homework \hmwkNo}} \\
    \normalsize\vspace{0.1in}\small{Due: \hmwkDueDate} \\
}

\author{\hmwkAuthorName\ -\ \hmwkAuthorID}
\date{}

\begin{document}

\maketitle
\thispagestyle{fancy}

You may discuss this assignment with other students and work on the problems together. However, your write-up should be your own individual work and you should indicate in your submission who you worked with, if applicable. You should use the {\LaTeX} template provided by us to write your solution and submit the generated PDF file into Gradescope. \\

I worked with: (Name, ID), (Name, ID), \ldots \\

Let $\TM$ be \textbf{deterministic} Turing machine if not otherwise specified with non-deterministic.

\begin{homeworkProblem}
Say that a non-terminal $A$ in $\CFG\ G$ is \emph{\textbf{usable}} if it appears in some derivation of some string $w \in L(G)$. Given a $\CFG\ G$ and a non-terminal $A$, consider the problem of testing whether $A$ is usable. Formulate this problem as a language and show that it is decidable.
\end{homeworkProblem}
\begin{solution}
	\begin{equation}\begin{aligned}
		CFG_{usable} = 
			& \{<G, A> | G = (\mathcal{N}, \Sigma, \mathcal{P}, \mathcal{S}) \texttt{ is a } \CFG, A \in \mathcal{P} \\
			& \texttt{ and } \exists w \in L(G), A \texttt{ is used when accepting } w\}
	\end{aligned}\end{equation}
	\begin{proof}
		Construct a $\TM$ that accepts $<G, A>$ as input and does the following:
		\begin{enumerate}
			\item Mark Start symbol $\mathcal{S}$ as \textit{Unsearched}
			\item Repeat the following: Iterate through all (non-)terminals, for (non-)terminals marked \textit{Unsearched}, call it $T$, until no (non-)terminal is marked \textit{Unsearchd}. Since there are limited 
			\begin{enumerate}
				\item mark $T$ as \textit{Searched}
				\item for each rule $T \rightarrow U_1U_2 \cdots U_k$, mark $U_1, U_2, \cdots, U_k$ \textit{Unsearched}
			\end{enumerate}
			\item If $A$ is marked \textit{Searched}, \accept, else \reject.
		\end{enumerate}
	\end{proof}
\end{solution}

\begin{homeworkProblem}
A \emph{\textbf{queue automaton}} is like a push-down automaton except that the stack is replaced by a queue. A \emph{\textbf{queue}} is a tape allowing symbols to be written only on the left-hand end and read only at the right-hand end. Each write operation (we'll call it a \emph{push}) adds a symbol to the left-hand end of the queue and each read operation (we'll call it a \emph{pull}) reads and removes a symbol at the right-hand end. As with a $\mathsf{PDA}$, the input is placed on a separate read-only input tape, and the head on the input tape can move only from left to right. The input tape contains a cell with a blank symbol following the input, so that the end of the input can be detected. A queue automaton accepts its input by entering a special accept state at any time. Show that a language can be recognized by a deterministic queue automaton iff the language is Turing-recognizable.
\end{homeworkProblem}

\begin{homeworkProblem}
Show that a language is decidable iff some enumerator enumerates the language in the string order. (\emph{\textbf{String order}} is the standard length-increasing, lexicographic order. See page 14 of the textbook.)
\end{homeworkProblem}
\begin{solution}\begin{proof}
	$\Rightarrow$ For language $L, \exists enumerator E$ that enumerates every string in L in the string order. \\
	Construct a $\TM$ with input $w$:
	\begin{enumerate}
		\item Run $E$ and generate an output, call it $s$.
		\item Compare the string order between $w$ and $s$ and there are following possible outcomes:
		\begin{enumerate} 
			\item $w ==_s s$, \accept;
			\item $w <_s s$, \reject;
			\item $w >_s s$, go back to the first step and take another string from $E$ to repeat this process.
		\end{enumerate}
	\end{enumerate}


	$\Leftarrow$ For language $L$, it is Turing-recognizable and decidable and has a corresponding decider $\TM$ M. \\
	Construct an enumerator $E$ for $L$, let $s_0, s_1, s_2, \cdots$ be a list of all possible strings in $\Sigma^*$ and it follows \textbf{string order}(This is very important):
	\begin{enumerate}
		\item Repeat the following for $i = 0, 1, 2, \cdots$
		\item Run M on input $s_i$
		\item If M \accept, print out $s_i$
	\end{enumerate}
\end{proof}\end{solution}

\begin{homeworkProblem}
Let $C$ be a language. Prove that $C$ is Turing-recognizable iff a decidable language $D$ exists such that $C = \{ x \mid \exists y \in \{ 0,1 \}^{\ast} ~ (\langle x,y \rangle \in D) \}$. \\
(Hint: You must prove both directions of the ``iff''. The ($\leftarrow$) direction is easier. For the ($\rightarrow$) direction, think of $y$ as providing additional information that allows you to confirm when $x \in C$, but without the possibility of looping.)
\end{homeworkProblem}
\begin{solution}

\end{solution}

\begin{homeworkProblem}
Consider the problem of determining whether a single-tape Turing machine ever writes a blank symbol over a nonblank symbol during the course of its computation on any input string. Formulate this problem as a language and show that it is undecidable.
\end{homeworkProblem}

%\pagebreak

\begin{homeworkProblem}
Let $A$ be a language.
\begin{enumerate}[(a)]
	\item Show that $A$ is Turing-recognizable iff $A \leq_\mathrm{m} A_{\TM}$.
	\item Show that $A$ is decidable iff $A \leq_\mathrm{m} \mathsf{0}^{\ast} \mathsf{1}^{\ast}$.
\end{enumerate}
\end{homeworkProblem}
\begin{solution}\begin{enumerate}[(a)]
\item 
	\begin{proof}
	$\Rightarrow$ Suppose we have $A \leq_\mathrm{m} A_{\TM}$ \\
	Since 
		1) $A_{\TM}$ is Turing-recognizable, 
		2) when $A \leq_\mathrm{m} B$, if $B$ is Turing-recognizable, then $A$ is too. \\
	It is trivial that $A$ is Turing-recognizable. \\

	$\Leftarrow$ Suppose $A$ is Turing-recognizable with a $\TM$ M that recognizes $A$ \\
	Construct the following machine M'(x):
	\begin{enumerate}
		\item 
	\end{enumerate}
	\end{proof}

\item 
	\begin{proof}
	$\Rightarrow$ Suppose  $A \leq_\mathrm{m} \mathsf{0}^{\ast} \mathsf{1}^{\ast}$ \\

	$\Leftarrow$ Suppose $A$ is decidable. \\
	\end{proof}
\end{enumerate}\end{solution}

\begin{homeworkProblem}
\begin{enumerate}[(a)]
	\item Let $J = \{ w \mid \text{either } w = \mathsf{0} x \text{ for some } x \in A_{\TM}, \text{ or } w = \mathsf{1} y \text{ for some } y \in \overline{A_{\TM}} \}$. Use mapping reductions to show that neither $J$ nor $\overline{J}$ is Turing-recognizable.
	\item Let $\mathit{FINITE}_{\TM} = \{ \langle T \rangle \mid T \text{ is a } \TM \text{ and } L(T) \text{ is a finite language} \}$. Show that $A_{\TM} \leq_\mathrm{m} \overline{\mathit{FINITE}_{\TM}}$ to prove that $\mathit{FINITE}_{\TM}$ is not T-recognizable.
	\item (harder) Show that $A_{\TM} \leq_{m} \mathit{FINITE}_{\TM}$ to prove that $\overline{\mathit{FINITE}_{\TM}}$ is not T-recognizable.
\end{enumerate}
\end{homeworkProblem}

\begin{homeworkProblem}
Define a \emph{\textbf{two headed finite automaton}} (2HFA) to be a deterministic finite automaton that has two read-only heads that each can move independently \emph{from left to right} on the input tape. The transition function $\delta$ of a 2HFA has the form: $\delta: Q \times \Sigma \times \Sigma \rightarrow Q \times \{\text{S,R}\} \times \{\text{S,R}\} $. Thus, at each step, the 2HFA can read the symbols under each of its two heads and move each head independently either right (an R move) or let it stay in place (an S move). We also assume that a 2HFA accepts its input by entering one of its designated accept states, regardless of its head positions. Furthermore, a 2HFA can detect when either of its heads are at the right end of the input tape. For example, a 2HFA can recognize the language $\{ \mathsf{a}^{n} \mathsf{b}^{n} \mathsf{c}^{n} \mid n \geq 1 \}$ as follows:
\begin{enumerate}
	\item Head 1 skips across any $\mathsf{a}$'s.
	\item Head 1 reads $\mathsf{b}$'s while Head 2 reads $\mathsf{a}$'s.
	\item Head 1 reads $\mathsf{c}$'s while Head 2 reads $\mathsf{b}$'s.
	\item \emph{Reject} if in Stages 2 or 3, Head 1 doesn't finish exactly when Head 2 finishes, or if symbols are ever encounterd out of the order: $\mathsf{a}$'s, $\mathsf{b}$'s then $\mathsf{c}$'s. \emph{Accept} otherwise.
\end{enumerate}
Let $E_{\text{2HFA}} = \{ \langle B \rangle \mid B \text{ is a 2HFA which recognizes the empty language} \}$. Sketch a proof that $E_{\text{2HFA}}$ is not decidable. (Give enough detail to show how your proof depends on the 2HFA model.)
\end{homeworkProblem}

\end{document}